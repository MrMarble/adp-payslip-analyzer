import{r as f,j as e,t as T,M as R,c as B}from"./vendor-CLQzd7bN.js";import{G as U,g as F}from"./pdfjs-YEcUENBO.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function r(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(s){if(s.ep)return;s.ep=!0;const c=r(s);fetch(s.href,c)}})();typeof window<"u"&&(U.workerSrc=new URL("/adp-payslip-analyzer/assets/pdf.worker-DNkBz6NP.mjs",import.meta.url).toString());async function w(t){const a=await F({data:t}).promise,r=[];for(let s=1;s<=a.numPages;s++){const o=(await(await a.getPage(s)).getTextContent()).items.filter(u=>"str"in u).map(u=>({text:u.str,x:u.transform[4],y:u.transform[5],width:u.width,height:u.height})),p=o.map(u=>u.text).join(" ");r.push({pageNumber:s,items:o,rawText:p})}const i=r.map(s=>s.rawText).join(`

`);return{pages:r,fullText:i}}function E(t,a=3){if(t.length===0)return[];const r=[...t].sort((n,o)=>Math.abs(n.y-o.y)>a?o.y-n.y:n.x-o.x),i=[];let s=[r[0]],c=r[0].y;for(let n=1;n<r.length;n++){const o=r[n];Math.abs(o.y-c)<=a?s.push(o):(i.push(s),s=[o],c=o.y)}return i.push(s),i}const P={321:{code:"321",name:"SALARIO BASE",description:"Base monthly salary before any additions or deductions",type:"earning"},413:{code:"413",name:"Q BONUS",description:"Quarterly bonus payment",type:"earning"},438:{code:"438",name:"BONUS",description:"Variable bonus payment",type:"earning"},637:{code:"637",name:"SEGURO ME",description:"Medical insurance benefit paid by employer (in-kind benefit)",type:"earning"},638:{code:"638",name:"AP.PENSIO",description:"Employer contribution to pension plan (in-kind benefit)",type:"earning"},702:{code:"702",name:"IN KIND M",description:"In-kind medical benefit (taxable value of medical insurance)",type:"earning"},711:{code:"711",name:"DENTAL IN",description:"Dental insurance benefit paid by employer",type:"earning"},712:{code:"712",name:"AWARD",description:"Award or recognition payment",type:"earning"},715:{code:"715",name:"T.RESTAU",description:"Restaurant vouchers/tickets (tax-exempt up to legal limit)",type:"earning"},716:{code:"716",name:"STOCK PP",description:"Stock purchase plan benefit (taxable discount on company stock)",type:"earning"},1005:{code:"1005",name:"SEGURIDAD SOCIAL",description:"Employee Social Security contribution (contingencias comunes)",type:"deduction"},1008:{code:"1008",name:"DESEMPLEO",description:"Unemployment insurance contribution",type:"deduction"},1009:{code:"1009",name:"FORMACION PROFES",description:"Professional training contribution",type:"deduction"},1010:{code:"1010",name:"SEG.SOCIAL MEI",description:"Intergenerational Equity Mechanism (MEI) for pension sustainability",type:"deduction"},1012:{code:"1012",name:"COTIZACION SOLIDARIA",description:"Solidarity contribution on earnings above Social Security ceiling",type:"deduction"},1115:{code:"1115",name:"SEGUR.SOCIAL SS",description:"Employee Social Security contribution (contingencias comunes) - alternate code",type:"deduction"},1118:{code:"1118",name:"DESEMPLEO SS",description:"Unemployment insurance contribution - alternate code",type:"deduction"},1119:{code:"1119",name:"FORM. PROFES. SS",description:"Professional training contribution - alternate code",type:"deduction"},1120:{code:"1120",name:"SEG.SOCIAL SS MEI",description:"Intergenerational Equity Mechanism (MEI) - alternate code",type:"deduction"},1051:{code:"1051",name:"IMP A CUENTA RENTA",description:"Income tax withholding (IRPF)",type:"deduction"},1057:{code:"1057",name:"IMP A CTA SEG.MEDICO",description:"IRPF withholding on medical insurance benefit (in-kind taxation)",type:"deduction"},1075:{code:"1075",name:"IMP A CTA SEG.DENTAL",description:"IRPF withholding on dental insurance benefit (in-kind taxation)",type:"deduction"},1077:{code:"1077",name:"IMP A CTA AWARD",description:"IRPF withholding on award payment",type:"deduction"},1085:{code:"1085",name:"IMP A CTA STOCK P.P",description:"IRPF withholding on stock purchase plan benefit",type:"deduction"},1122:{code:"1122",name:"COTIZAC.SOLIDARIA SS",description:"Additional solidarity contribution to Social Security",type:"deduction"},1542:{code:"1542",name:"ESPP1",description:"Employee Stock Purchase Plan deduction (voluntary savings for stock purchase)",type:"deduction"},1550:{code:"1550",name:"DEDUC.PLAN PENSIONES",description:"Pension plan deduction (employee contribution to company pension)",type:"deduction"},1592:{code:"1592",name:"LIQUI.NEG.EXP ANTER",description:"Negative liquidation adjustment from previous period",type:"deduction"}};function z(t){return P[t]}function k(t){return t in P}const $=["413","438"];function N(t){return $.includes(t)}function y(t){if(!t||t.trim()==="")return null;const a=t.trim().replace(",","."),r=parseFloat(a);return isNaN(r)?null:r}const G={ENERO:"01",FEBRERO:"02",MARZO:"03",ABRIL:"04",MAYO:"05",JUNIO:"06",JULIO:"07",AGOSTO:"08",SEPTIEMBRE:"09",OCTUBRE:"10",NOVIEMBRE:"11",DICIEMBRE:"12"};function W(t){const a=t.match(/(\d{1,2})\s+DE\s+(\w+)\s+DE\s+(\d{4})/i);if(!a)return"";const[,r,i,s]=a,c=G[i.toUpperCase()];return c?`${s}-${c}-${r.padStart(2,"0")}`:""}function H(t){for(const a of t){const i=a.map(s=>s.text).join(" ").match(/FECHA DE ABONO\s+(\d{1,2}\s+DE\s+\w+\s+DE\s+\d{4})/i);if(i)return{display:i[1],sortable:W(i[1])}}return{display:"",sortable:""}}function K(t){for(const a of t){const i=a.map(s=>s.text).join(" ").match(/LIQUIDO A RECIBIR\s+([\d.,]+)â‚¬?/i);if(i)return y(i[1])??0}return 0}function Q(t){for(const a of t){const i=a.map(s=>s.text).join(" ").match(/TOTALES\s+([\d.,]+)\s+([\d.,]+)/i);if(i)return{totalEarnings:y(i[1])??0,totalDeductions:y(i[2])??0}}return{totalEarnings:0,totalDeductions:0}}function I(t){const a=[];for(const r of t){const s=[...r].sort((l,d)=>l.x-d.x).map(l=>l.text.trim()).filter(l=>l!=="");if(s.length===0)continue;const c=s[0].match(/^(\d{3,4})$/);if(!c)continue;const n=c[1],o=s.slice(1);let p=0;for(let l=0;l<o.length;l++){if(/^[\d.,]+$/.test(o[l])){p=l;break}p=l+1}const u=o.slice(0,p).join(" "),g=o.slice(p);a.push({code:n,name:u,values:g})}return a}function D(t){return parseInt(t.code,10)<1e3?"earning":"deduction"}function C(t){const a=z(t.code),r=D(t);let i=null,s=null,c=null,n=null;const o=t.values;if(o.length===1){const p=y(o[0]);r==="earning"?c=p:n=p}else o.length===2?(i=y(o[0]),r==="earning"?c=y(o[1]):n=y(o[1])):o.length>=3&&(i=y(o[0]),s=y(o[1]),r==="earning"?c=y(o[2]):n=y(o[2]));return{code:t.code,name:a?.name??t.name,description:a?.description??"",cantidadBase:i,precio:s,devengos:c,deducciones:n}}async function Y(t){const r=(await w(t)).pages[0];if(!r)throw new Error("PDF has no pages");const i=E(r.items),{display:s,sortable:c}=H(i),n=K(i),{totalEarnings:o,totalDeductions:p}=Q(i),u=I(i),g=[],l=[];for(const d of u){if(!k(d.code))continue;const m=C(d);D(d)==="earning"?g.push(m):l.push(m)}return{paymentDate:s,sortableDate:c,earnings:g,deductions:l,totalEarnings:o,totalDeductions:p,netPay:n}}async function q(t){const r=(await w(t)).pages[0];if(!r)return[];const i=E(r.items),s=I(i),c=[];for(const n of s)if(!k(n.code)){const o=C(n);c.push({code:n.code,name:n.name,cantidadBase:o.cantidadBase,precio:o.precio,devengos:o.devengos,deducciones:o.deducciones})}return c}const A="theme";function V(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function S(){const t=localStorage.getItem(A);return t==="light"||t==="dark"||t==="system"?t:"system"}function v(t){return t==="system"?V():t}function Z(){const[t,a]=f.useState(S),[r,i]=f.useState(v(S())),s=f.useCallback(n=>{const o=v(n);document.documentElement.setAttribute("data-theme",o),i(o)},[]),c=f.useCallback(n=>{a(n),localStorage.setItem(A,n),s(n)},[s]);return f.useEffect(()=>{const n=window.matchMedia("(prefers-color-scheme: dark)"),o=()=>{t==="system"&&s("system")};return n.addEventListener("change",o),()=>n.removeEventListener("change",o)},[t,s]),f.useEffect(()=>{s(t)},[]),{theme:t,setTheme:c,effectiveTheme:r}}const _=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5"}),e.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),J=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})}),X=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"20",height:"14",x:"2",y:"3",rx:"2"}),e.jsx("line",{x1:"8",x2:"16",y1:"21",y2:"21"}),e.jsx("line",{x1:"12",x2:"12",y1:"17",y2:"21"})]});function O(){const{theme:t,setTheme:a,effectiveTheme:r}=Z(),i=()=>{a(t==="light"?"dark":t==="dark"?"system":"light")},s=()=>t==="system"?e.jsx(X,{}):r==="dark"?e.jsx(J,{}):e.jsx(_,{}),c=()=>t==="system"?`Theme: System (${r})`:`Theme: ${t.charAt(0).toUpperCase()+t.slice(1)}`;return e.jsx("button",{className:"btn btn-ghost btn-circle",onClick:i,title:c(),children:s()})}function ee({onFilesUpload:t,loading:a,error:r}){const i=f.useCallback(n=>{n.preventDefault();const o=Array.from(n.dataTransfer.files).filter(p=>p.type==="application/pdf");o.length>0&&t(o)},[t]),s=f.useCallback(n=>{n.preventDefault()},[]),c=f.useCallback(n=>{const o=Array.from(n.target.files??[]);o.length>0&&t(o)},[t]);return e.jsxs("div",{className:"hero min-h-screen bg-base-200 relative",children:[e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(O,{})}),e.jsx("div",{className:"hero-content text-center",children:e.jsxs("div",{className:"max-w-md",children:[e.jsx("h1",{className:"text-5xl font-bold",children:"Payslip Analyzer"}),e.jsx("p",{className:"py-6",children:"Upload your ADP payslip PDFs to get a clear breakdown of your earnings, deductions, and where your money goes. Upload multiple payslips to see trends over time."}),e.jsx("div",{className:"border-2 border-dashed border-base-300 rounded-box p-10 bg-base-100 cursor-pointer hover:border-primary transition-colors",onDrop:i,onDragOver:s,children:a?e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("span",{className:"loading loading-spinner loading-lg text-primary"}),e.jsx("p",{children:"Analyzing payslips..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-base-content/50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("p",{className:"mt-4 text-base-content/70",children:"Drag and drop your PDFs here, or click to browse"}),e.jsx("input",{type:"file",accept:".pdf,application/pdf",multiple:!0,onChange:c,className:"file-input file-input-bordered file-input-primary w-full max-w-xs mt-4"})]})}),r&&e.jsxs("div",{className:"alert alert-error mt-4",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:r})]}),e.jsx("p",{className:"text-xs text-base-content/50 mt-6",children:"Your data stays private - all processing happens in your browser."})]})})]})}function te({payslip:t}){t.earnings.find(c=>c.code==="321")?.devengos??t.totalEarnings;const r=[{id:"Salary"}],i=[];for(const c of t.deductions)c.deducciones&&c.deducciones>0&&(r.push({id:c.name}),i.push({source:"Salary",target:c.name,value:c.deducciones}));r.push({id:"Net Pay"}),i.push({source:"Salary",target:"Net Pay",value:t.netPay});const s={nodes:r,links:i};return e.jsx(T,{data:s,margin:{top:20,right:160,bottom:20,left:80},align:"justify",sort:"ascending",colors:{scheme:"category10"},nodeOpacity:1,nodeHoverOthersOpacity:.35,nodeThickness:18,nodeSpacing:24,nodeBorderWidth:0,nodeBorderRadius:3,linkOpacity:.5,linkHoverOthersOpacity:.1,linkContract:3,enableLinkGradient:!0,labelPosition:"outside",labelOrientation:"horizontal",labelPadding:16,labelTextColor:{from:"color",modifiers:[["darker",1]]},valueFormat:c=>c.toLocaleString("es-ES",{style:"currency",currency:"EUR"})})}function j(t){return t===null?"-":t.toLocaleString("es-ES",{style:"currency",currency:"EUR"})}function ne(t){return t===null?"-":`${t.toLocaleString("es-ES",{minimumFractionDigits:2})}%`}function se(t){return t===null?"-":t.toLocaleString("es-ES",{minimumFractionDigits:2})}function oe({item:t}){const a=N(t.code);return e.jsxs("tr",{className:a?"rainbow-text":"",children:[e.jsxs("td",{children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsx("div",{className:"text-xs text-base-content/60",children:t.description})]}),e.jsx("td",{className:"text-right",children:se(t.cantidadBase)}),e.jsx("td",{className:"text-right",children:j(t.precio)}),e.jsx("td",{className:`text-right font-medium ${a?"":"text-success"}`,children:j(t.devengos)})]})}function ae({item:t}){return e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsx("div",{className:"text-xs text-base-content/60",children:t.description})]}),e.jsx("td",{className:"text-right",children:j(t.cantidadBase)}),e.jsx("td",{className:"text-right",children:ne(t.precio)}),e.jsx("td",{className:"text-right font-medium text-error",children:j(t.deducciones)})]})}function re({payslip:t}){return e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("h3",{className:"font-semibold text-lg mt-4 mb-2",children:"Earnings (Devengos)"}),e.jsxs("table",{className:"table table-zebra",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Concept"}),e.jsx("th",{className:"text-right",children:"Quantity"}),e.jsx("th",{className:"text-right",children:"Unit Price"}),e.jsx("th",{className:"text-right",children:"Amount"})]})}),e.jsx("tbody",{children:t.earnings.map(a=>e.jsx(oe,{item:a},a.code))}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("th",{colSpan:3,children:"Total Earnings"}),e.jsx("th",{className:"text-right text-success",children:j(t.totalEarnings)})]})})]}),e.jsx("h3",{className:"font-semibold text-lg mt-6 mb-2",children:"Deductions (Deducciones)"}),e.jsxs("table",{className:"table table-zebra",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Concept"}),e.jsx("th",{className:"text-right",children:"Base"}),e.jsx("th",{className:"text-right",children:"Rate"}),e.jsx("th",{className:"text-right",children:"Amount"})]})}),e.jsx("tbody",{children:t.deductions.map(a=>e.jsx(ae,{item:a},a.code))}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("th",{colSpan:3,children:"Total Deductions"}),e.jsx("th",{className:"text-right text-error",children:j(t.totalDeductions)})]})})]}),e.jsx("div",{className:"divider"}),e.jsxs("div",{className:"flex justify-between items-center text-xl font-bold",children:[e.jsx("span",{children:"Net Pay (LÃ­quido a Recibir)"}),e.jsx("span",{className:"text-primary",children:j(t.netPay)})]})]})}function M({title:t,badge:a,onReset:r,children:i}){return e.jsxs("div",{className:"min-h-screen bg-base-200 p-4",children:[e.jsxs("div",{className:"navbar bg-base-100 rounded-box mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-xl font-bold px-4",children:t}),a]}),e.jsxs("div",{className:"flex-none gap-2",children:[e.jsx(O,{}),e.jsx("button",{className:"btn btn-ghost",onClick:r,children:"Upload New"})]})]}),i]})}function L({payslip:t,onReset:a,embedded:r=!1}){const i=e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"stats shadow w-full mb-4",children:[e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Payment Date"}),e.jsx("div",{className:"stat-value text-lg",children:t.paymentDate})]}),e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Total Earnings"}),e.jsx("div",{className:"stat-value text-success",children:t.totalEarnings.toLocaleString("es-ES",{style:"currency",currency:"EUR"})})]}),e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Total Deductions"}),e.jsx("div",{className:"stat-value text-error",children:t.totalDeductions.toLocaleString("es-ES",{style:"currency",currency:"EUR"})})]}),e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Net Pay"}),e.jsx("div",{className:"stat-value text-primary",children:t.netPay.toLocaleString("es-ES",{style:"currency",currency:"EUR"})})]})]}),e.jsx("div",{className:"card bg-base-100 shadow mb-4",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title",children:"Money Flow"}),e.jsx("div",{className:"h-96",children:e.jsx(te,{payslip:t})})]})}),e.jsx("div",{className:"card bg-base-100 shadow",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title",children:"Details"}),e.jsx(re,{payslip:t})]})})]});return r?e.jsx("div",{children:i}):e.jsx(M,{title:"Payslip Analyzer",onReset:a,children:i})}function ie({payslips:t,visibleSeries:a,selectedIndex:r,onSelectIndex:i}){const s=f.useMemo(()=>{const n=[];a.has("321")&&n.push({id:"Base Salary",color:"hsl(210, 70%, 50%)",data:t.map(l=>({x:l.sortableDate,y:l.earnings.find(d=>d.code==="321")?.devengos??0}))}),a.has("netPay")&&n.push({id:"Net Pay",color:"hsl(140, 70%, 40%)",data:t.map(l=>({x:l.sortableDate,y:l.netPay}))}),a.has("bonus")&&n.push({id:"Bonus",color:"#fbbf24",data:t.map(l=>{const d=l.earnings.filter(m=>N(m.code)).reduce((m,x)=>m+(x.devengos??0),0);return{x:l.sortableDate,y:d}})});const o=["637","638","702","711","715","716"],p=["#17becf","#bcbd22","#7f7f7f","#e377c2","#8c564b","#9467bd"];o.forEach((l,d)=>{if(a.has(l)){const x=t.find(h=>h.earnings.some(b=>b.code===l))?.earnings.find(h=>h.code===l)?.name??l;n.push({id:x,color:p[d],data:t.map(h=>({x:h.sortableDate,y:h.earnings.find(b=>b.code===l)?.devengos??0}))})}});const u=["1005","1008","1009","1010","1012","1051","1057","1075","1085","1122","1542","1550"],g=["#d62728","#ff7f0e","#2ca02c","#1f77b4","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf","#aec7e8","#ffbb78"];return u.forEach((l,d)=>{if(a.has(l)){const x=t.find(h=>h.deductions.some(b=>b.code===l))?.deductions.find(h=>h.code===l)?.name??l;n.push({id:x,color:g[d%g.length],data:t.map(h=>({x:h.sortableDate,y:h.deductions.find(b=>b.code===l)?.deducciones??0}))})}}),n},[t,a]),c=f.useMemo(()=>t.map((n,o)=>({payslip:n,index:o})).filter(({payslip:n})=>n.earnings.some(o=>N(o.code))).map(({payslip:n})=>({axis:"x",value:n.sortableDate,lineStyle:{stroke:"#fbbf24",strokeWidth:2,strokeDasharray:"4 4"},legend:"ðŸŒˆ Bonus",legendPosition:"top"})),[t]);return e.jsx("div",{className:"time-series-chart h-full w-full",children:e.jsx(R,{data:s,margin:{top:30,right:110,bottom:50,left:60},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!1},axisBottom:{tickSize:5,tickPadding:5,tickRotation:-45,format:n=>new Date(n).toLocaleDateString("es-ES",{month:"short",year:"2-digit"})},axisLeft:{tickSize:5,tickPadding:5,format:n=>`${(n/1e3).toFixed(1)}k`},colors:{datum:"color"},pointSize:10,pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabel:"y",pointLabelYOffset:-12,useMesh:!0,enableSlices:"x",markers:c,legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,symbolSize:12,symbolShape:"circle"}],onClick:n=>{if("data"in n&&"x"in n.data){const o=t.findIndex(p=>p.sortableDate===n.data.x);o!==-1&&i(o)}},tooltip:({point:n})=>e.jsxs("div",{className:"bg-base-100 p-2 rounded shadow border",children:[e.jsx("strong",{children:n.seriesId}),e.jsx("br",{}),n.data.yFormatted,"â‚¬"]})})})}function ce(t){return t.toLocaleString("es-ES",{style:"currency",currency:"EUR"})}function de({payslips:t,onReset:a}){const r=f.useMemo(()=>[...t].sort((d,m)=>d.sortableDate.localeCompare(m.sortableDate)),[t]),[i,s]=f.useState(r.length-1),c=r[i],n=f.useMemo(()=>{const d=new Map,m=new Map;for(const x of r){for(const h of x.earnings)d.set(h.code,h.name);for(const h of x.deductions)m.set(h.code,h.name)}return{earnings:d,deductions:m}},[r]),[o,p]=f.useState(new Set(["netPay"])),u=d=>{p(m=>{const x=new Set(m);return x.has(d)?d!=="netPay"&&x.delete(d):x.add(d),x})},g=r.some(d=>d.earnings.some(m=>N(m.code))),l=e.jsxs("span",{className:"badge badge-primary",children:[r.length," payslips"]});return e.jsxs(M,{title:"Payslip Analyzer",badge:l,onReset:a,children:[e.jsx("div",{className:"card bg-base-100 shadow mb-4",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title",children:"Payslip History"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx("span",{className:"text-sm font-medium self-center mr-2",children:"Show:"}),e.jsx("div",{className:"badge badge-success",children:"Net Pay"}),g&&e.jsxs("div",{className:"badge badge-warning gap-1",children:[e.jsx("span",{className:"rainbow-text",children:"Bonus"})," months highlighted"]}),e.jsx("div",{className:"divider divider-horizontal mx-1"}),g&&e.jsx("button",{className:`badge badge-outline cursor-pointer rainbow-text ${o.has("bonus")?"badge-warning":"opacity-50"}`,onClick:()=>u("bonus"),children:"Bonus"}),Array.from(n.earnings.entries()).filter(([d])=>!N(d)).map(([d,m])=>e.jsx("button",{className:`badge badge-outline cursor-pointer ${o.has(d)?"badge-info":"opacity-50"}`,onClick:()=>u(d),children:m},d)),Array.from(n.deductions.entries()).map(([d,m])=>e.jsx("button",{className:`badge badge-outline cursor-pointer ${o.has(d)?"badge-error":"opacity-50"}`,onClick:()=>u(d),children:m},d))]}),e.jsx("div",{className:"h-80",children:e.jsx(ie,{payslips:r,visibleSeries:o,selectedIndex:i,onSelectIndex:s})})]})}),e.jsx("div",{className:"card bg-base-100 shadow mb-4",children:e.jsx("div",{className:"card-body py-3",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"font-medium",children:"Select Payslip:"}),e.jsx("select",{className:"select select-bordered flex-1 max-w-md",value:i,onChange:d=>s(Number(d.target.value)),children:r.map((d,m)=>{const x=d.earnings.some(h=>N(h.code));return e.jsxs("option",{value:m,children:[d.paymentDate," â€” ",ce(d.netPay),x?" ðŸŒˆ BONUS":""]},d.sortableDate)})})]})})}),c&&e.jsx(L,{payslip:c,onReset:a,embedded:!0})]})}function le(){const[t,a]=f.useState([]),[r,i]=f.useState(null),[s,c]=f.useState(!1);f.useEffect(()=>{},[]);const n=async p=>{c(!0),i(null);try{const u=[];for(const g of p){const l=await g.arrayBuffer(),d=await Y(l);u.push(d);const m=await g.arrayBuffer(),x=await q(m);x.length>0&&console.warn(`%cUnknown concepts found!%c

The following payslip concepts are not yet supported:

`+x.map(h=>`  ${h.code}: ${h.name}`).join(`
`)+`

Please open an issue:
https://github.com/mrmarble/adp-payslip-analyzer/issues/new`,"background: #f59e0b; color: black; padding: 2px 6px; border-radius: 3px; font-weight: bold;","")}a(u)}catch(u){i(u instanceof Error?u.message:"Failed to parse PDFs"),a([])}finally{c(!1)}},o=()=>{a([]),i(null)};return t.length===0?e.jsx(ee,{onFilesUpload:n,loading:s,error:r}):t.length===1?e.jsx(L,{payslip:t[0],onReset:o}):e.jsx(de,{payslips:t,onReset:o})}B.createRoot(document.getElementById("root")).render(e.jsx(f.StrictMode,{children:e.jsx(le,{})}));
